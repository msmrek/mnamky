"use strict";!function($){function gbt_cn_onElementInserted(containerSelector,selector,childSelector,callback){if("MutationObserver"in window){var target=$(containerSelector)[0];new(window.MutationObserver||window.WebKitMutationObserver)(function(mutations){mutations.forEach(function(mutation){if(mutation.addedNodes.length&&$(mutation.addedNodes).length){var finalSelector=selector,ownElement=$(mutation.addedNodes).filter(selector);if(""!=childSelector&&(ownElement=ownElement.find(childSelector),finalSelector=selector+" "+childSelector),ownElement.each(function(index){callback($(this),index+1,ownElement.length,finalSelector,!0)}),!ownElement.length){var childElements=$(mutation.addedNodes).find(finalSelector);childElements.each(function(index){callback($(this),index+1,childElements.length,finalSelector,!0)})}}})}).observe(target,{childList:!0,subtree:!0})}}function gbt_cn_onAddedToCart(selector,theclass,callback){if("MutationObserver"in window){var target=selector[0];new(window.MutationObserver||window.WebKitMutationObserver)(function(mutations){mutations.forEach(function(mutation){""!=theclass?(!mutation.oldValue||!mutation.oldValue.match(theclass)&&mutation.oldValue.match("loading"))&&mutation.target.classList&&mutation.target.classList.contains(theclass)&&callback():mutation.oldValue&&!mutation.oldValue.match("loading")||callback()})}).observe(target,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]})}}var gbt_cn={messages:[],open:!1,init:function(){gbt_cn_onElementInserted("body",".woocommerce-error","",gbt_cn.readNotice),gbt_cn_onElementInserted("body",".woocommerce-message","",gbt_cn.readNotice),gbt_cn_onElementInserted("body",".woocommerce-info","",gbt_cn.readNotice),gbt_cn_onElementInserted("body",".woocommerce-notice","",gbt_cn.readNotice),gbt_cn.checkExistingElements(".woocommerce-error"),gbt_cn.checkExistingElements(".woocommerce-message"),gbt_cn.checkExistingElements(".woocommerce-info"),gbt_cn.checkExistingElements(".woocommerce-notice")},checkExistingElements:function(selector){var element=$(selector);element.length&&element.each(function(index){gbt_cn.readNotice($(this),index+1,element.length,selector,!1)})},readNotice:function(element,index,total,selector,dynamic){var noticeType="success";-1<selector.indexOf("error")?noticeType="error":-1<selector.indexOf("info")&&(noticeType="info"),index<=total&&gbt_cn.storeMessage(element,noticeType,dynamic),index==total&&(gbt_cn.clearPopupMessages(),gbt_cn.addMessagesToPopup(),gbt_cn.openPopup(element),setTimeout(function(){gbt_cn.messages=[]},1e3))},clearPopupMessages:function(){$("#gbt-custom-notification-notice").find(".gbt-custom-notification-content").empty()},removeDuplicatedMessages:function(){for(var obj={},i=0,len=gbt_cn.messages.length;i<len;i++)obj[gbt_cn.messages[i].message]=gbt_cn.messages[i];for(var key in gbt_cn.messages=new Array,obj)gbt_cn.messages.push(obj[key])},isMessageValid:function(message,dynamic){return!(0<["<p></p>",'<ul class="msg"></ul>',"<ul></ul>"].filter(function(string_check){return-1!==message.indexOf(string_check)}).length)},storeMessage:function(notice,type,dynamic){gbt_cn.isMessageValid(notice.html(),dynamic)&&(gbt_cn.messages.push({message:notice.html(),type:type,dynamic:dynamic}),gbt_cn.removeDuplicatedMessages())},getAdditionalIconClass:function(noticeType){var iconClass="";switch(noticeType){case"success":iconClass=gbt_cn_info.success_icon_class;break;case"error":iconClass=gbt_cn_info.error_icon_class;break;case"info":iconClass=gbt_cn_info.info_icon_class}return""==iconClass&&(iconClass+=" "+gbt_cn_info.icon_default_class),iconClass},addMessagesToPopup:function(notice){var delay_in=.5,delay_out=.5+.5*gbt_cn.messages.length,notif_delay="",notif_text_delay="";$.each(gbt_cn.messages,function(index,value){var additional_icon_class=gbt_cn.getAdditionalIconClass(value.type),dynamicClass=value.dynamic?"gbt-cn-dynamic":"gbt-cn-static";1==gbt_cn_info.slide_out?(notif_delay="animation-delay: "+delay_in+"s, "+(delay_out+3)+"s",notif_text_delay=delay_in+.75+"s, "+(delay_out+3.15)+"s"):(notif_delay="animation-delay: "+delay_in+"s",notif_text_delay=delay_in+.75+"s"),""!=value.message&&(0<=value.message.indexOf("product_notification_background")?$("#gbt-custom-notification-notice .gbt-custom-notification-content").append("<div class='gbt-custom-notification-notice "+value.type+" "+dynamicClass+" ' style='"+notif_delay+"'>"+value.message+"</div>").find(".product_notification_text").css("animation-delay",notif_text_delay):$("#gbt-custom-notification-notice .gbt-custom-notification-content").append("<div class='gbt-custom-notification-notice "+value.type+" "+dynamicClass+" ' style='"+notif_delay+"'><i class='gbt-custom-notification-notice-icon "+additional_icon_class+"'></i><div class='gbt-custom-notification-message' style='animation-delay:"+notif_text_delay+"'><div>"+value.message+"</div></div></div>"),delay_in+=.5,delay_out-=.5)})},openPopup:function(){$(".gbt-custom-notification-notice").addClass("open-notice")}};document.addEventListener("DOMContentLoaded",function(){gbt_cn.init(),$("body").trigger({type:"gbt_cn",obj:gbt_cn}),$(document).on("click",".page-notifications.slide-in .gbt-custom-notification-notice",function(){$(this).find(".product_notification_text").removeAttr("style"),$(this).find(".gbt-custom-notification-message").removeAttr("style"),$(this).removeAttr("style").removeClass("open-notice").addClass("close-notice")}),$("body.gbt_custom_notif.single-product").on("click touchend",".product.product-type-simple .columns > .product_infos .cart .ajax_add_to_cart",function(e){if(0<$("body").find(".product_layout_classic").length)var imgSrc=$(".woocommerce-product-gallery .woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image img").attr("src")||"";else imgSrc=$(".woocommerce-product-gallery__wrapper .product_images .product-image:first-child a img").attr("src")||"";var prodTitle=$(".product_title").html()||"";gbt_cn_onAddedToCart($(this),"added",function(){$("#content").prepend('<div class="woocommerce-message"><div class="product_notification_wrapper"><div class="product_notification_background" style="background-image:url('+imgSrc+')"></div><div class="product_notification_text"><div>'+gbt_cn_info.cartButton+"&quot;"+prodTitle+"&quot; "+gbt_cn_info.addedToCartMessage+"</div></div></div></div>")})}),$("body").on("click touchend",".products .ajax_add_to_cart",function(){var imgSrc=$(this).parents(".product").find(".product_thumbnail_wrapper img").attr("src")||"",prodTitle=$(this).parents(".product").find(".woocommerce-loop-product__title a").html()||"";gbt_cn_onAddedToCart($(this),"added",function(){$(".st-content").prepend('<div class="woocommerce-message"><div class="product_notification_wrapper"><div class="product_notification_background" style="background-image:url('+imgSrc+')"></div><div class="product_notification_text"><div>'+gbt_cn_info.cartButton+"&quot;"+prodTitle+"&quot; "+gbt_cn_info.addedToCartMessage+"</div></div></div></div>")})}),$("body").on("click touchend",".cd-quick-view .ajax_add_to_cart",function(){var imgSrc=$(this).parents(".product").find(".cover-image img").attr("src")||"",prodTitle=$(this).parents(".product_infos").find(".product_title").html()||"";gbt_cn_onAddedToCart($(this),"added",function(){$(".st-content").prepend('<div class="woocommerce-message"><div class="product_notification_wrapper"><div class="product_notification_background" style="background-image:url('+imgSrc+')"></div><div class="product_notification_text"><div>'+gbt_cn_info.cartButton+"&quot;"+prodTitle+"&quot; "+gbt_cn_info.addedToCartMessage+"</div></div></div></div>")})}),$("body.gbt_custom_notif.woocommerce-wishlist").on("click touchend",".ajax_add_to_cart",function(){var imgSrc=$(this).parents("tr").find(".product-thumbnail img").attr("src")||"",prodTitle=$(this).parents("tr").find(".product-name a").html()||"";gbt_cn_onAddedToCart($(this),"",function(){$(".st-content").prepend('<div class="woocommerce-message"><div class="product_notification_wrapper"><div class="product_notification_background" style="background-image:url('+imgSrc+')"></div><div class="product_notification_text"><div>'+gbt_cn_info.cartButton+"&quot;"+prodTitle+"&quot; "+gbt_cn_info.addedToCartMessage+"</div></div></div></div>")})})})}(jQuery);