jQuery(function(d){"use strict";d(".wizard-demo-import").on("click"," .install:not(.done-ajax)",function(a){d(this).removeClass("failed-ajax").addClass("doing-ajax").html("Installing...");var s=new FormData;s.append("action","ocdi_import_demo_data"),s.append("security",gbtStrings.ajax_nonce),s.append("selected",d("#ocdi__demo-import-files").val()),function e(i){var n=d(".wizard-demo-import .install:not(.done-ajax)");d.ajax({method:"POST",url:gbtStrings.ajaxurl,data:i,contentType:!1,processData:!1,beforeSend:function(){d(".js-ocdi-ajax-loader").show()}}).done(function(a){if(void 0!==a.status&&"newAJAX"===a.status)e(i);else if(void 0!==a.status&&"customizerAJAX"===a.status)(s=new FormData).append("action","ocdi_import_customizer_data"),s.append("security",gbtStrings.ajax_nonce),e(s);else if(void 0!==a.status&&"afterAllImportAJAX"===a.status){var s;(s=new FormData).append("action","ocdi_after_import_data"),s.append("security",gbtStrings.ajax_nonce),e(s)}else if(void 0!==a.message){d(".js-ocdi-ajax-loader").hide(),n.removeClass("doing-ajax").addClass("done-ajax").html("Done!");var t=n.attr("href");window.location.href=t,d(document).trigger("ocdiImportComplete")}else d(".js-ocdi-ajax-response").append('<div class="notice  notice-error  is-dismissible"><p>'+a+"</p></div>"),d(".js-ocdi-ajax-loader").hide(),n.removeClass("doing-ajax").addClass("failed-ajax").html("Try again?")}).fail(function(a){d(".js-ocdi-ajax-response").append('<div class="notice  notice-error  is-dismissible"><p>Error: '+a.statusText+" ("+a.status+")</p></div>"),d(".js-ocdi-ajax-loader").hide(),n.removeClass("doing-ajax").addClass("failed-ajax").html("Try again?")})}(s),a.preventDefault()});var r=!0;d("div").hasClass("wizard-plugins")&&window.performance&&window.performance.navigation.type==window.performance.navigation.TYPE_BACK_FORWARD&&location.reload(),d(".wizard-plugins").on("click"," .install:not(.done-ajax)",function(a){a.preventDefault(),d(this).removeClass("failed-ajax").addClass("doing-ajax").html("Installing..."),r=!0,function t(a){var e=d(".plugins .plugin:not(.parsed):first");if(!(0<e.length&&1==e.find("input.checkbox").prop("checked"))){if(0==e.find("input.checkbox").prop("checked"))return e.addClass("parsed"),t(),!1;if(!0===r){d(".wizard-plugins .install").removeClass("doing-ajax").removeClass("failed-ajax").addClass("done-ajax").html("Done!");var s=d(".wizard-plugins .install").attr("href");window.location.href=s}else d(".plugins .plugin.failed-parsing").removeClass("parsed").removeClass("failed-parsing"),d(".wizard-plugins .install").removeClass("doing-ajax").addClass("failed-ajax").html("Try again?");return!1}var i=d(e).find(".button.ajax-request");if(0<i.length){e.find(".plugin-status").empty().html('<span class="state state-loading"></span>'),e.addClass("loading");var n=i.attr("href"),l=i.attr("data-plugin"),o=i.attr("data-verify");i.attr("data-action"),jQuery.ajax({url:n,type:"get"}).complete(function(a,s){d.post(o,{action:"gbt_get_wizard_plugins",gbt_plugin:l},function(a){if(e.addClass("parsed still-parsing"),!0===a)r=r&&!0,e.removeClass("still-parsing").find(".plugin-status").empty().html('<span class="state state-success"></span>'),e.removeClass("loading"),t();else if("activate"===a){var s=i.attr("data-activateurl");jQuery.ajax({url:s,type:"get"}).complete(function(a,s){d.post(o,{action:"gbt_get_wizard_plugins",gbt_plugin:l},function(a){!0===a?(r=r&&!0,e.removeClass("still-parsing").find(".plugin-status").empty().html('<span class="state state-success"></span>')):(r=r&&!1,e.addClass("failed-parsing").removeClass("still-parsing").find(".plugin-status").empty().html('<span class="state state-error"></span>')),e.removeClass("loading"),t()})})}else r=r&&!1,e.addClass("failed-parsing").removeClass("still-parsing").find(".plugin-status").empty().html('<span class="state state-error"></span>'),e.removeClass("loading"),t()})})}else e.addClass("parsed"),e.find(".plugin-status").empty().html('<span class="state state-success"></span>'),t()}()})});